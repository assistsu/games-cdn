(self.webpackChunkgames_ui=self.webpackChunkgames_ui||[]).push([[697],{4647:(e,t,a)=>{"use strict";a.d(t,{A:()=>p});var n=a(3029),r=a(2901),o=a(9417),s=a(5501),i=a(1801),l=a(3954),c=a(4467),u=a(6540),d=a(6784),m=a(1107),h=a(7683);a(2160);var p=function(e){(0,s.A)(f,e);var t,a,p=(t=f,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.A)(t);if(a){var r=(0,l.A)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,i.A)(this,e)});function f(){var e;return(0,n.A)(this,f),e=p.call(this),(0,c.A)((0,o.A)(e),"nudgePlayer",(function(){var t=e.props,a=t.isMe,n=t.amIAdmin;if(!a&&n){var r=e.props,o=r.gameName,s=r.gameId,i=r.player;m.A.nudgePlayer(o,s,i._id).catch(e.handleError)}})),e.handleError=h.A.handleError.bind((0,o.A)(e)),e}return(0,r.A)(f,[{key:"getPlayerBorderColor",value:function(){return"sg-border-".concat(this.props.isMe?"warning":"primary")}},{key:"isPlayerCurrentPlayer",value:function(){var e=this.props,t=e.currentPlayer,a=e.player;return t&&t._id==a._id}},{key:"getPlayerBtn",value:function(){return"sg-btn".concat(this.isPlayerCurrentPlayer()?"-light":"")}},{key:"getPlayerBtnClassName",value:function(){return["player-card",this.getPlayerBtn(),this.getPlayerBorderColor()].join(" ")}},{key:"render",value:function(){var e=this.props,t=e.player,a=e.isMe,n=e.playerChosenCard,r=e.CardComponent,o=e.hideInfo,s=e.isPlayerWon,i=e.additionalInfo;return u.createElement("div",{className:"player-card-outer","data-player-id":t._id},u.createElement("button",{className:this.getPlayerBtnClassName(),onClick:this.nudgePlayer,title:t.name},u.createElement("div",{className:"flex-column"},u.createElement(d.g,{icon:"user",className:"player-icon"}),u.createElement("div",{className:"player-name"},t.name,a&&" (You)"),i&&i(),1!=o&&(s?u.createElement("span",{className:"px-2 m-auto bg-success rounded text-white"},"Won"):u.createElement("div",null,u.createElement("div",{className:"text-center",style:{fontSize:"10px"}},u.createElement("b",null,"(",t.cardsCount,")")),r&&u.createElement("div",{className:"game-player-selected-card-back"},n&&u.createElement(r,{card:n,className:"game-player-selected-card game-player-selected-card-force"})))))))}}]),f}(u.Component)},9697:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var n=a(3029),r=a(2901),o=a(9417),s=a(5501),i=a(1801),l=a(3954),c=a(6540),u=a(4647),d=a(8529),m=a(1107),h=a(7683),p=a(624),f=function(){function e(){(0,n.A)(this,e)}return(0,r.A)(e,null,[{key:"submitChosenCard",value:function(e,t){return new Promise((function(a,n){p.A.post("uno/".concat(e,"/submit"),t).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}},{key:"takeCard",value:function(e){return new Promise((function(t,a){p.A.post("uno/".concat(e,"/take")).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}},{key:"passCard",value:function(e){return new Promise((function(t,a){p.A.post("uno/".concat(e,"/pass")).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))}}]),e}(),y=a(6784);var g=function(e){(0,s.A)(u,e);var t,a,o=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.A)(t);if(a){var r=(0,l.A)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,i.A)(this,e)});function u(){return(0,n.A)(this,u),o.call(this)}return(0,r.A)(u,[{key:"getText",value:function(e,t){return e&&c.createElement("div",{className:"bg-white mt-auto mb-auto p-2 d-flex",style:"+4"!=e?{width:"120%",marginLeft:"-10%",borderRadius:"10px",borderBottomLeftRadius:"100%",borderTopRightRadius:"100%"}:{}},c.createElement("span",{className:"position-relative m-auto font-weight-bold",style:{fontSize:t?"25px":"30px",letterSpacing:"-3px"}},e))}},{key:"getBlackCard",value:function(e){return c.createElement("div",{className:"position-relative w-100 h-100"},c.createElement("div",{className:"position-absolute d-flex flex-column flex-wrap h-100 w-100"},c.createElement("div",{className:"card bg-warning h-50 w-50 rounded-0"}),c.createElement("div",{className:"card bg-danger h-50 w-50 rounded-0"}),c.createElement("div",{className:"card bg-primary h-50 w-50 rounded-0"}),c.createElement("div",{className:"card bg-success h-50 w-50 rounded-0"})),this.getText(e))}},{key:"getCardDisplayValue",value:function(e){if(null!=e.match(/[0-9]/)||""==e)return this.getText(e);switch(e){case"DRAW_TWO_CARDS":return this.getText("+2",!0);case"REVERSE_CARD":return this.getText(c.createElement(y.g,{icon:"sync-alt",fontSize:"50px"}),!0);case"SKIP_CARD":return this.getText(c.createElement(y.g,{icon:"ban"}),!0);case"WILD_CARD":return this.getBlackCard(null);case"WILD_CARD_DRAW_FOUR_CARDS":return this.getBlackCard("+4",!0)}}},{key:"render",value:function(){var e=this.props,t=e.card,a=e.className,n=e.onClick,r=e.disabled;return c.createElement("div",{onClick:1!=r&&"function"==typeof n?function(){return n(t)}:function(){},className:"btn mb-2 d-flex card p-1 bg-".concat(t.color," text-").concat("dark"!=t.color?t.color:"white"," overflow-hidden ").concat(a),style:{height:"70px",width:"50px",lineHeight:1,marginRight:"-5px",boxShadow:"-5px 5px 15px black"}},this.getCardDisplayValue(t.type))}}]),u}(c.Component),v=a(2543);const C=function(e){(0,s.A)(y,e);var t,a,p=(t=y,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,l.A)(t);if(a){var r=(0,l.A)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,i.A)(this,e)});function y(){var e;return(0,n.A)(this,y),(e=p.call(this)).state=v.assign({},e.getInitialValues()),e.updateReceived=e.updateReceived.bind((0,o.A)(e)),e.setUnoButtonClicked=e.setUnoButtonClicked.bind((0,o.A)(e)),e.setChosenCard=e.setChosenCard.bind((0,o.A)(e)),e.submitChosenCard=e.submitChosenCard.bind((0,o.A)(e)),e.takeCard=e.takeCard.bind((0,o.A)(e)),e.passCard=e.passCard.bind((0,o.A)(e)),e.restartGame=e.restartGame.bind((0,o.A)(e)),e.hideColorChooseModal=e.hideColorChooseModal.bind((0,o.A)(e)),e.resetStateUpdateGameInfo=h.A.resetStateUpdateGameInfo.bind((0,o.A)(e)),e.handleError=h.A.handleError.bind((0,o.A)(e)),e}return(0,r.A)(y,[{key:"getInitialValues",value:function(){return{showColorChooseModal:!1,isUnoClicked:!1,chosenCard:null}}},{key:"listPlayers",value:function(){var e=this,t=this.props.game.players;return c.createElement("div",{className:"d-flex flex-wrap px-1 mt-2"},t.map((function(t,a){return c.createElement(u.A,{key:a,gameId:e.props.game._id,gameName:"uno",player:t,isMe:t._id==e.props.me._id,currentPlayer:e.props.game.currentPlayer,amIAdmin:e.props.state.amIAdmin})})))}},{key:"takeCard",value:function(){f.takeCard(this.props.game._id).then(this.props.updateGameInfo).catch(this.handleError)}},{key:"getBorderedCard",value:function(e,t,a,n){return c.createElement("div",{className:"border-".concat(a," rounded-circle m-auto d-flex"),style:{height:"120px",width:"120px",borderWidth:"2px",borderStyle:"solid"}},c.createElement(g,{card:e,className:"m-auto",disabled:n,onClick:t}))}},{key:"getDeckAndLastCard",value:function(){var e=this.props.game,t=e.lastCard,a=e.currentPlayer;return c.createElement("div",{className:"d-flex my-2"},this.getBorderedCard({color:"info",type:""},this.takeCard,"info",!this.props.state.isMyMove||a.pass),this.getBorderedCard(t,null,t.chosenColor||t.color,!0))}},{key:"passCard",value:function(){f.passCard(this.props.game._id).then(this.resetStateUpdateGameInfo).catch(this.handleError)}},{key:"setUnoButtonClicked",value:function(){this.setState({isUnoClicked:!0})}},{key:"showPassAndUnoButtons",value:function(){var e=this.props.state.isMyMove;return c.createElement("div",{className:"d-flex my-2"},c.createElement("button",{disabled:!e||!this.props.game.currentPlayer.pass,style:{boxShadow:"5px 5px 10px black"},className:"btn btn-success m-auto font-weight-bold btn-shadow",onClick:this.passCard},"Pass"),c.createElement("button",{disabled:!e||2!=this.props.game.myCards.length||this.state.isUnoClicked,style:{boxShadow:"5px 5px 10px black"},className:"btn btn-danger m-auto font-weight-bold btn-shadow",onClick:this.setUnoButtonClicked},"UNO"))}},{key:"submitChosenCard",value:function(e){var t=this.state.chosenCard,a={chosenCard:v.assign(t,{chosenColor:e?e.color:null}),isUnoClicked:this.state.isUnoClicked};f.submitChosenCard(this.props.game._id,a).then(this.resetStateUpdateGameInfo).catch(this.handleError)}},{key:"setChosenCard",value:function(e){var t=null!=e.type.match(/WILD_CARD/);this.setState({chosenCard:e,showColorChooseModal:t},t?function(){}:this.submitChosenCard)}},{key:"showMyCards",value:function(){var e=this,t=this.props.game.myCards,a=!this.props.state.isMyMove;return c.createElement("div",{className:"d-flex flex-wrap p-2 mt-2"},v.sortBy(t,["color","type"]).map((function(t,n){return c.createElement(g,{onClick:e.setChosenCard,card:t,key:n,disabled:a})})))}},{key:"hideColorChooseModal",value:function(){this.setState({showColorChooseModal:!1})}},{key:"getColorChooseModalBody",value:function(){var e=this;return c.createElement("div",{className:"d-flex"},["warning","danger","primary","success"].map((function(t,a){return c.createElement(g,{card:{color:t,type:""},onClick:function(t){e.hideColorChooseModal(),e.submitChosenCard(t)},key:a,className:"m-auto"})})))}},{key:"getColorChooseModal",value:function(){return c.createElement(d.A,{id:"colorChooseModal",header:"Choose Color",show:this.state.showColorChooseModal,onClose:this.hideColorChooseModal,body:this.getColorChooseModalBody()})}},{key:"getPlayerTurnAlert",value:function(){return c.createElement("div",{className:"d-flex py-2"},c.createElement("span",{className:"m-auto sg-btn-".concat(this.props.state.isMyMove?"danger":"trans"," ")},this.props.state.isMyMove?c.createElement("b",null,"Your turn"):c.createElement("span",null,c.createElement("b",null,this.props.game.currentPlayer.name)," turn")))}},{key:"renderGame",value:function(){return c.createElement("div",{className:"d-flex flex-column"},this.getPlayerTurnAlert(),this.listPlayers(!0),this.getDeckAndLastCard(),this.showPassAndUnoButtons(),this.showMyCards(),this.getColorChooseModal())}},{key:"renderGameResults",value:function(){return c.createElement("div",{className:"game-result text-center"},c.createElement("div",{className:"alert alert-success text-center m-0 rounded-top rounded-bottom-0",style:{boxShadow:"0 0 5px white"}},c.createElement("b",null,"Game Results")),c.createElement("div",{className:"game-result-table"},c.createElement("table",{className:"table table-hover table-light table-striped rounded-bottom",style:{boxShadow:"0 0 5px white"}},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{scope:"col"},"Rank"),c.createElement("th",{scope:"col"},"Name"),c.createElement("th",{scope:"col"},"Status"),c.createElement("th",{scope:"col"},"Bal Cards"))),c.createElement("tbody",null,v.sortBy(this.props.game.players,"cardsCount").map((function(e,t){return c.createElement("tr",{key:t},c.createElement("td",{scope:"row"},t+1),c.createElement("td",null,e.name),c.createElement("td",null,0==t?"Won":"Lost"),c.createElement("td",null,e.cardsCount))}))))),this.props.state.amIAdmin&&c.createElement("div",{className:"d-flex"},c.createElement("button",{className:"btn btn-primary m-auto btn-shadow",onClick:this.restartGame},"Restart")))}},{key:"restartGame",value:function(){m.A.restartGame("uno",this.props.game._id).then(this.props.updateGameInfo).catch(this.handleError)}},{key:"render",value:function(){switch(this.props.game.status){case"STARTED":return this.renderGame();case"ENDED":return this.renderGameResults()}}},{key:"updateReceived",value:function(e){switch(e.event){case"PLAYER_SUBMITTED_CARD":var t=this.props.state.myIndexInPlayers;if(-1!=t&&e.gameData.players[t].cardsCount!=this.props.game.players[t].cardsCount){this.props.getGameInfo();break}case"PLAYER_TOOK_CARD":this.props.updateGameInfo(e.gameData).then(h.A.playLightNotify);break;case"PLAYER_PASSED":this.props.updateGameInfo(e.gameData).then(this.props.state.isMyMove?h.A.playNewNotify:h.A.playLightNotify)}}}]),y}(c.Component)},1107:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(3029),r=a(2901),o=a(624),s=function(){function e(){(0,n.A)(this,e)}return(0,r.A)(e,null,[{key:"getGameInfo",value:function(e,t){return new Promise((function(a,n){o.A.get("game/".concat(t,"/info"),{gameName:e}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}},{key:"startGame",value:function(e,t){return new Promise((function(a,n){o.A.post("".concat(e,"/").concat(t,"/start")).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}},{key:"restartGame",value:function(e,t){return new Promise((function(a,n){o.A.post("game/".concat(t,"/restart"),{gameName:e}).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}},{key:"leaveGame",value:function(e,t){return new Promise((function(a,n){o.A.post("".concat(e,"/").concat(t,"/leave")).then((function(e){return a(e)})).catch((function(e){return n(e)}))}))}},{key:"sendMessage",value:function(e,t,a){return new Promise((function(n,r){o.A.post("game/".concat(t,"/message"),{gameName:e,text:a}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"nudgePlayer",value:function(e,t,a){return new Promise((function(n,r){o.A.post("game/".concat(t,"/nudge"),{gameName:e,playerId:a}).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}}]),e}()},7683:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var n=a(8669),r=a(4692);function o(e){r("#".concat(e)).trigger("play")}function s(){o("error-notify")}const i={audios:["new-notify","error-notify","light-notify","buzz-notify"],playNewNotify:function(){o("new-notify")},playErrorNotify:s,playLightNotify:function(){o("light-notify")},playBuzzNotify:function(){o("buzz-notify")},vibrate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;window.navigator.vibrate(e)},resetStateGetGameInfo:function(){this.setState(this.getInitialValues(),this.props.getGameInfo())},resetStateUpdateGameInfo:function(e){var t=this;this.setState(this.getInitialValues(),(function(){return t.props.updateGameInfo(e)}))},amICurrentPlayer:function(e,t){if(!e||!t)return!1;if(e.isLocalPlayer){if(e.createdBy._id!=t._id)return!1}else if(e._id!=t._id)return!1;return!0},handleError:function(e){s();var t=e.message||"Error Occurred";n.oR.error(t,{toastId:t}),this.setState(this.getInitialValues())}}},8529:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var n=a(3029),r=a(2901),o=a(5501),s=a(1801),i=a(3954),l=a(6540);a(9382);var c=function(e){(0,o.A)(u,e);var t,a,c=(t=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,i.A)(t);if(a){var r=(0,i.A)(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return(0,s.A)(this,e)});function u(){return(0,n.A)(this,u),c.apply(this,arguments)}return(0,r.A)(u,[{key:"getCloseButton",value:function(e){return l.createElement("button",{className:"sg-modal-close-btn opacity-".concat(e?1:0),onClick:this.props.onClose},"×")}},{key:"render",value:function(){var e=this.props,t=e.header,a=e.body,n=e.show,r=e.hideClose;return l.createElement("div",{className:"sg-modal","data-show":n},l.createElement("div",{className:"sg-modal-content-outer"},l.createElement("div",{className:"sg-modal-content"},l.createElement("div",{className:"sg-modal-header"},this.getCloseButton(!1),t,this.getCloseButton(!r)),l.createElement("div",{className:"sg-modal-body"},a))))}}]),u}(l.PureComponent)},5069:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1601),r=a.n(n),o=a(6314),s=a.n(o)()(r());s.push([e.id,".sg-modal{position:fixed;z-index:-1;opacity:0;transition:z-index .5s,opacity .6s;top:0;left:0;height:100%;width:100%;background-color:rgba(0,0,0,.5)}.sg-modal .sg-modal-content-outer{height:100%;width:100%;overflow:auto;display:flex;padding:5px}.sg-modal .sg-modal-content{margin:auto;background:#3a0455;border-radius:10px;box-shadow:0 0 5px #fff}.sg-modal .sg-modal-content .sg-modal-header{position:relative;padding:5px;border-bottom:1px solid #fff;color:#fff;text-align:center;display:flex}.sg-modal .sg-modal-content .sg-modal-header .sg-modal-close-btn{padding:0;height:20px;width:20px;background:#da5454;font-size:12px;border-radius:100%;color:#fff;text-align:center;margin:auto}.sg-modal .sg-modal-content .sg-modal-body{padding:10px}.sg-modal[data-show=true]{z-index:100;opacity:1}",""]);const i=s},1165:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(1601),r=a.n(n),o=a(6314),s=a.n(o)()(r());s.push([e.id,".player-card-outer{margin:10px auto}.player-card-outer .player-card{width:70px;margin:auto 5px;border-radius:5px !important}.player-card-outer .player-name,.player-card-outer .player-additonal-info{font-weight:bold;font-size:12px;overflow:hidden;text-overflow:ellipsis}.player-card-outer .player-icon{margin:5px auto;font-size:15px}",""]);const i=s},9382:(e,t,a)=>{var n=a(5072),r=a(5069);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},2160:(e,t,a)=>{var n=a(5072),r=a(1165);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.id,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}}}]);